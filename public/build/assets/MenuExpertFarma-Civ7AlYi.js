import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as i}from"./index-BOnQTV8N.js";import{t as $}from"./MobileMenu-D4AC1Y8U.js";import{T as _}from"./tag-Dgi-uTqk.js";import{C as E}from"./chevron-up-Mt3xll-e.js";import{C as T}from"./chevron-down-uIVDLcM-.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./main-DKOTUah5.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./BasicRest-CK59r2lH.js";import"./index-CiDqjS8N.js";import"./index-C0Swrixi.js";import"./index-fNjTmf9T.js";import"./createLucideIcon-DfjclApS.js";const G=({pages:y=[],items:d,data:o,visible:p=!1})=>{var N;const[u,b]=i.useState(!1),[c,x]=i.useState(null),[l,k]=i.useState([]),[m,v]=i.useState(0),f=i.useRef(null);i.useEffect(()=>{function r(s){f.current&&!f.current.contains(s.target)&&(b(!1),x(null))}return document.addEventListener("pointerdown",r),()=>document.removeEventListener("pointerdown",r)},[]),i.useEffect(()=>{if(u&&d.length>0&&!c){const r=[...d].sort((s,t)=>s.name.localeCompare(t.name));x(r[0])}},[u,d,c]),i.useEffect(()=>{(async()=>{try{console.log("Fetching active tags...");const s=await $.getTags();if(console.log("Tags response:",s),s!=null&&s.data){const t=s.data.filter(n=>n.promotional_status==="permanent"||n.promotional_status==="active").sort((n,a)=>n.promotional_status==="active"&&a.promotional_status!=="active"?-1:a.promotional_status==="active"&&n.promotional_status!=="active"?1:n.name.localeCompare(a.name));k(t),console.log("Active tags set:",t);const h=t.filter(n=>n.promotional_status==="active").length,C=t.filter(n=>n.promotional_status==="permanent").length;if(console.log(`ðŸŽ¯ Tags cargados: ${h} promocionales activos, ${C} permanentes`),h>0){const n=t.filter(a=>a.promotional_status==="active");console.log("ðŸŽ‰ Promociones activas:",n.map(a=>`${a.name} (${a.start_date} - ${a.end_date})`))}}}catch(s){console.error("Error fetching tags:",s)}})()},[]),i.useEffect(()=>{if(l.length>2&&window.innerWidth<1024){const r=setInterval(()=>{v(s=>{const t=s+2;return t>=l.length?0:t})},3e3);return()=>clearInterval(r)}},[l.length]);const g=window.innerWidth<1024,j=g?p&&l.length>0:!0,w=l.length>0&&g&&p;return console.log("items",o),console.log("tags",l),console.log("isMobile",g),console.log("shouldShowMenu",j),j?e.jsx("nav",{className:`${w?` block w-full relative md:block ${o!=null&&o.backgroundColor?o==null?void 0:o.backgroundColor:"bg-secondary"} font-paragraph text-sm`:` relative w-full md:block ${o!=null&&o.backgroundColor?o==null?void 0:o.backgroundColor:"bg-secondary"} font-paragraph text-sm`}`,ref:f,children:e.jsx("div",{className:"px-primary  2xl:px-0 2xl:max-w-7xl mx-auto",children:e.jsx("ul",{className:"flex items-center gap-4 lg:gap-6 text-sm justify-between",children:w?e.jsx("div",{className:"w-full py-3 px-4",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 h-10",children:[l.slice(m,m+2).map((r,s)=>{const t=m+s;return e.jsxs("a",{href:`/catalogo?tag=${r.id}`,className:"group relative border-white border-2 overflow-hidden rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",style:{background:`linear-gradient(135deg, ${r.background_color||"#3b82f6"}, ${r.background_color||"#3b82f6"}dd)`},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"}),e.jsx("div",{className:"relative h-full flex items-center justify-center p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-center",children:[r.icon?e.jsx("img",{src:`/storage/images/tag/${r.icon}`,alt:r.name,className:"w-6 h-6 object-contain filter brightness-0 invert",onError:h=>h.target.src="/api/cover/thumbnail/null"}):e.jsx(_,{size:20,style:{color:r.text_color||"#ffffff"}}),e.jsx("span",{className:"text-xs font-semibold leading-tight",style:{color:r.text_color||"#ffffff"},children:r.name})]})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all duration-300"})]},`${r.id}-${t}`)}),l.slice(m,m+2).length<2&&e.jsx("div",{className:"rounded-2xl bg-white/10 flex items-center justify-center",children:e.jsx("div",{className:"text-white/50 text-xs",children:"MÃ¡s prÃ³ximamente"})})]}),l.length>2&&e.jsx("div",{className:"flex justify-center mt-2 gap-1",children:Array.from({length:Math.ceil(l.length/2)}).map((r,s)=>e.jsx("button",{onClick:()=>v(s*2),className:`w-2 h-2 rounded-full transition-all duration-300 ${Math.floor(m/2)===s?`${o!=null&&o.backgroundColor?o==null?void 0:o.backgroundColor:"bg-primary"} shadow-lg`:"bg-neutral-light hover:bg-white/60"}`},s))})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("ul",{className:"flex items-center gap-4 lg:gap-6 text-sm",children:[(o==null?void 0:o.showCategories)&&e.jsxs("li",{className:" py-3",children:[e.jsxs("button",{className:"font-medium customtext-neutral-dark flex items-center gap-2  pr-6 transition-colors duration-300 relative before:absolute before:right-0 before:top-1/2 before:-translate-y-1/2 before:h-3 before:w-[1px] before:bg-black",onClick:()=>b(!u),children:["CategorÃ­as",u?e.jsx(E,{size:20}):e.jsx(T,{size:20})]}),u&&e.jsx("div",{className:"absolute z-50 top-11 left-0 bg-white shadow-2xl border rounded-lg transition-all duration-300 ease-in-out w-full max-w-[100vw] max-h-[50vh] overflow-hidden",children:e.jsxs("div",{className:"w-full max-w-7xl mx-auto flex h-full",children:[e.jsx("div",{className:"w-1/4 min-w-[200px] py-10 bg-gray-50 border-r border-gray-200",children:e.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:e.jsx("ul",{className:"py-2",children:[...d].sort((r,s)=>r.name.localeCompare(s.name)).map((r,s)=>e.jsx("li",{children:e.jsx("button",{className:`w-full text-left rounded-sm overflow-hidden px-4 py-3 hover:bg-secondary transition-colors duration-200 border-l-4 ${(c==null?void 0:c.id)===r.id?`${o!=null&&o.backgroundColor?o==null?void 0:o.backgroundColor:"bg-primary"} border-neutral-dark customtext-neutral-dark font-semibold`:"border-transparent text-gray-700 hover:border-nuetral-dark"}`,onClick:()=>x(r),children:e.jsx("span",{className:"block text-sm font-medium",children:r.name})})},s))})})}),e.jsx("div",{className:"w-3/4",children:c?e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h3",{className:"text-2xl font-bold customtext-neutral-dark mb-2",children:c.name})}),e.jsx("div",{className:"overflow-y-auto max-h-[50vh]",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:((N=c.subcategories)==null?void 0:N.map((r,s)=>e.jsx("a",{href:`/catalogo?subcategory=${r.slug}`,className:"block p-3 rounded-lg   hover:bg-secondary transition-all duration-200 group",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium customtext-neutral-light hover:cusomtext-neutral-dark group-hover:text-gray-900 text-sm",children:r.name}),r.description&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:r.description})]})})},s)))||e.jsx("div",{className:"col-span-2 text-center py-8 text-gray-500",children:e.jsx("p",{children:"No hay subcategorÃ­as disponibles"})})})})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsx("p",{children:"Selecciona una categorÃ­a para ver sus subcategorÃ­as"})})})]})})]}),y.filter(r=>r.menuable).map((r,s,t)=>e.jsx("li",{className:"py-3",children:e.jsx("a",{href:r.path,className:" customtext-neutral-dark  cursor-pointer transition-all duration-300"+(s!==t.length-1?" pr-6 relative before:absolute before:right-0 before:top-1/2 before:-translate-y-1/2 before:h-3 before:w-[1px] before:bg-black":" pr-6"),children:r.name})},s))]}),l.length>0&&e.jsx("div",{className:"flex items-center gap-4 lg:gap-4 text-sm",children:l.map((r,s)=>e.jsx("li",{className:"",children:e.jsxs("a",{href:`/catalogo?tag=${r.id}`,className:"font-medium rounded-full p-2 hover:brightness-105 cursor-pointer transition-all duration-300 relative flex items-center gap-2",style:{backgroundColor:r.background_color||"#3b82f6",color:r.text_color||"#ffffff"},title:r.description||r.name,children:[r.icon&&e.jsx("img",{src:`/storage/images/tag/${r.icon}`,alt:r.name,className:"w-4 h-4",onError:t=>t.target.src="/api/cover/thumbnail/null"}),r.name]})},r.id))})]})})})}):null};export{G as default};
