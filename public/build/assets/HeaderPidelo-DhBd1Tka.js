import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as a}from"./index-BOnQTV8N.js";import{G as Le}from"./Global-DWbVqTT_.js";import{C as Ie}from"./HeaderSearch-DsiY_iPi.js";import{L as je}from"./Logout-BpuTJ_83.js";import ze from"./MenuSimple-2KbucAtS.js";import{X as ke}from"./x-fof_H3Vv.js";import{C as Te}from"./chevron-down-uIVDLcM-.js";import{C as xe}from"./check-D5vaIe6v.js";import{S as O}from"./search-BQ59Robe.js";import{A as _}from"./index-BZvh78jk.js";import{C as $e}from"./chevron-left-JcR9Fe4w.js";import{m as re}from"./proxy-B0QLMKEh.js";import{C as ve}from"./chevron-right-Cug7tVUE.js";import{P as Me}from"./ProfileImage-BX3Lrso6.js";import{C as se,D as we}from"./door-closed-OXb-qp6H.js";import{H as De}from"./house-DDB4Ooi5.js";import{S as Ne}from"./shopping-cart-DLRnxGTD.js";import{U as Pe}from"./user-BZB1h7Cv.js";import{S as Ae}from"./settings-jey665c1.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./PolicyModal-C80IvD61.js";import"./index-B6ujFmsw.js";import"./index-Chjiymov.js";import"./CartItemRow-DmaxKgYF.js";import"./Number2Currency-B5ZenVq9.js";import"./General-BmbBKdsB.js";import"./tippy-react.esm-DmkRJDEW.js";import"./index-pSueRYGM.js";import"./trash-2-DU7LB6-f.js";import"./createLucideIcon-DfjclApS.js";import"./plus-CTIomuuF.js";import"./main-B6F2O9-U.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./MobileMenu-NyIajWsm.js";import"./BasicRest-DBO1iUsn.js";import"./index-CeCfhSXL.js";import"./tag-Dgi-uTqk.js";import"./chevron-up-Mt3xll-e.js";function Be({search:f,setSearch:i,pages:ae,items:ne,onClose:m,searchSuggestions:le,isLoadingSuggestions:ie,fetchSearchSuggestions:u,clearSuggestions:v,selectSuggestion:E,selectedSuggestionIndex:R,handleKeyDown:W,stores:w=[],selectedStore:M,setSelectedStore:I}){var ee;const[x,N]=a.useState("main"),[P,Q]=a.useState(null),[oe,Z]=a.useState(null),[A,X]=a.useState([]),[B,ce]=a.useState("right"),[k,g]=a.useState(!1),[c,z]=a.useState(!1),[F,b]=a.useState(w||[]),ge=a.useRef(null),de=a.useRef(null),C=a.useRef([]),D=a.useRef(null),L=r=>{I(r),z(!1)};a.useEffect(()=>{b(w||[])},[w]),a.useEffect(()=>{const r=o=>{D.current&&!D.current.contains(o.target)&&z(!1)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[]);const S=r=>{if(r.preventDefault(),f.trim()){const o=f.trim();v(),g(!1),window.location.href=`/catalogo?search=${encodeURIComponent(o)}`}return!1},q=r=>{i(r),r.trim().length>=2?(u(r),g(!0)):(v(),g(!1))},ue=r=>{k&&le.length>0?W&&W(r):r.key==="Enter"&&(r.preventDefault(),S(r))},y=r=>{E(r),g(!1)},G=()=>{f.trim().length>=2&&(u(f),g(!0))},me=()=>{setTimeout(()=>{g(!1)},200)},U=({suggestions:r,isLoading:o,onSelect:h,selectedIndex:j})=>k?e.jsx(re.div,{ref:de,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-[60] max-h-60 overflow-y-auto mt-1",children:o?e.jsx("div",{className:"p-4 text-center text-gray-600",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}),"Buscando..."]})}):r.length>0?e.jsx("ul",{className:"py-2",children:r.map((p,te)=>e.jsx("li",{ref:$=>C.current[te]=$,children:e.jsxs("button",{"data-suggestion-button":!0,onMouseDown:$=>{$.preventDefault(),h(p)},className:`w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors duration-200 flex items-center gap-3 ${te===j?"bg-blue-50 border-l-4 border-primary":""}`,type:"button",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-100 rounded-lg overflow-hidden",children:p.image?e.jsx("img",{src:`/api/items/media/${p.image}`,alt:p.name,className:"w-full h-full object-cover",onError:$=>{$.target.src="/api/cover/thumbnail/null"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(O,{size:16})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate",children:p.name}),p.category&&e.jsx("div",{className:"text-sm text-gray-600 truncate",children:p.category.name}),p.final_price&&e.jsxs("div",{className:"text-sm font-semibold text-primary",children:["S/ ",parseFloat(p.final_price).toFixed(2)]})]})]})},p.id))}):e.jsx("div",{className:"p-4 text-center text-gray-600",children:"No se encontraron productos"})}):null,T=(r,o="right",h=null)=>{ce(o),h&&Q(h),setTimeout(()=>{N(r)},50)},V=r=>{Z(r.name),X([...A,{level:x,name:"Categorías"}]),T("subcategories","right",r.name)},he=()=>{if(A.length>0){const r=A[A.length-1];T(r.level,"left"),X(A.slice(0,-1))}else x==="subcategories"?T("categories","left"):x==="categories"&&T("main","left")},H=r=>{T("categories","right")},K=()=>"Menú principal",fe=()=>{if(x==="main")return e.jsxs("div",{className:"animate-fade animate-duration-300",children:[e.jsxs("button",{className:"px-4 py-2 mb-3 w-full flex justify-between items-center hover:bg-gray-50 active:bg-primary transition-all rounded-xl",onClick:()=>H(),children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"font-medium",children:"Categorías"})}),e.jsx(ve,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("div",{className:"space-y-2",children:ae.map((r,o)=>r.menuable&&e.jsx("a",{href:r.path,className:"p-4 py-2 flex justify-between items-center w-full hover:bg-gray-50 active:bg-primary transition-all rounded-xl",children:e.jsx("span",{className:"font-medium",children:r.name})},o))})]});if(x==="categories"){const r=[...ne].sort((o,h)=>o.name.localeCompare(h.name,"es",{sensitivity:"base"}));return e.jsx("div",{className:B==="right"?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:e.jsx("div",{className:"space-y-2",children:r.map(o=>e.jsxs("div",{className:"px-4 py-2 rounded-xl flex justify-between items-center cursor-pointer hover:bg-gray-50 active:bg-primary transition-all",onClick:()=>V(o),children:[e.jsx("span",{className:"font-medium",children:o.name}),e.jsx(ve,{className:"h-5 w-5 text-gray-400"})]},o.id))})})}else if(x==="subcategories"&&P){const r=ne.find(h=>h.name===P),o=r.subcategories?[...r.subcategories].sort((h,j)=>h.name.localeCompare(j.name,"es",{sensitivity:"base"})):[];return e.jsx("div",{className:B==="right"?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:e.jsx("div",{className:"space-y-2",children:o.map((h,j)=>e.jsxs("a",{href:`/catalogo?subcategory=${h.slug}`,className:"flex w-full px-4 py-2 rounded-xl justify-between items-center hover:bg-gray-50 active:bg-primary transition-all",children:[e.jsx("span",{className:"font-medium",children:h.name}),e.jsx(ve,{className:"h-5 w-5 text-gray-400"})]},j))})})}};return a.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),a.useEffect(()=>{const r=o=>{o.key==="Escape"&&(k?(g(!1),v()):f.trim()?i(""):m())};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[f,m,i,k,v]),e.jsxs("div",{className:"fixed inset-0 z-[99999] flex flex-col touch-none overscroll-none",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:m}),e.jsx("div",{className:"relative w-full md:w-[400px] md:mx-auto flex flex-col h-[100dvh]",children:e.jsxs("div",{className:"mt-auto bg-white shadow-xl flex flex-col max-h-[85vh] rounded-t-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-white flex justify-between items-center border-b border-gray-200 sticky top-0 z-[9999]",children:[e.jsx("h1",{className:"text-lg font-bold",children:K()}),e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",onClick:m,children:e.jsx(ke,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"overflow-y-auto flex-1 p-4 overscroll-contain",children:[e.jsxs("div",{className:"mb-4 relative",ref:D,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tienda"}),e.jsxs("button",{type:"button",onClick:()=>z(!c),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[e.jsx("span",{className:"truncate text-left",children:M?((ee=F.find(r=>r.id===M))==null?void 0:ee.name)||M:"Todas las tiendas"}),e.jsx(Te,{className:`w-4 h-4 transition-transform ${c?"rotate-180":""}`})]}),c&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-[70] max-h-48 overflow-y-auto",children:e.jsxs("ul",{className:"py-1",children:[e.jsx("li",{children:e.jsxs("button",{type:"button",onClick:()=>L(""),className:`w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors flex items-center justify-between ${M===""?"bg-blue-50":""}`,children:[e.jsx("span",{children:"Todas las tiendas"}),M===""&&e.jsx(xe,{className:"w-4 h-4 text-primary"})]})}),F.map(r=>e.jsx("li",{children:e.jsxs("button",{type:"button",onClick:()=>L(r.id),className:`w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors flex items-center justify-between ${M===r.id?"bg-blue-50":""}`,children:[e.jsx("span",{className:"truncate",children:r.name}),M===r.id&&e.jsx(xe,{className:"w-4 h-4 text-primary flex-shrink-0 ml-2"})]})},r.id))]})})]}),e.jsxs("div",{className:"mb-5 relative",children:[e.jsxs("form",{onSubmit:S,role:"search",className:"relative w-full",children:[e.jsx("input",{ref:ge,type:"search",name:"search",placeholder:"Buscar productos",value:f,onChange:r=>q(r.target.value),onKeyDown:ue,onFocus:G,onBlur:me,className:"w-full pr-12 py-3 pl-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:outline-none",enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Buscar productos"}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:e.jsx(O,{className:"h-4 w-4"})})]}),e.jsx(_,{children:e.jsx(U,{suggestions:le,isLoading:ie,onSelect:y,selectedIndex:R})})]}),x!=="main"&&e.jsxs("button",{onClick:he,className:"flex items-center text-primary mb-4 font-medium",children:[e.jsx($e,{className:"h-5 w-5 mr-1"}),e.jsx("span",{children:x==="categories"?"Categorías":P})]}),e.jsx("div",{className:"pb-16",children:fe()}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center",children:e.jsx(ze,{visible:!0})})]})]})})]})}const Ct=({items:f,data:i,cart:ae,setCart:ne,isUser:m,pages:le,generals:ie=[]})=>{var Re;console.log("Tiendas",f);const[u,v]=a.useState(""),[E,R]=a.useState(!1),W=a.useRef(null),[w,M]=a.useState([]),[I,x]=a.useState(-1),N=Array.isArray(f==null?void 0:f.stores)?f.stores:Array.isArray(f)?f:[],P=ie.find(t=>t.correlative==="phone_whatsapp"),Q=ie.find(t=>t.correlative==="message_whatsapp"),oe=(P==null?void 0:P.description)??null,Z=(Q==null?void 0:Q.description)??null,[A,X]=a.useState(!1),[B,ce]=a.useState(!1),[k,g]=a.useState(!1),[c,z]=a.useState(""),[F,b]=a.useState(!1),[ge,de]=a.useState(!1),[C,D]=a.useState([]),[L,S]=a.useState(!1),[q,ue]=a.useState(!1),[y,G]=a.useState(-1),me=a.useRef([]),U=a.useRef(null),T=a.useRef(null),V=a.useRef(null),he=a.useRef(null),H=a.useRef(null),K=a.useRef(null),fe=a.useRef([]),ee=ae.reduce((t,s)=>Number(t)+Number(s.quantity),0),r=()=>{try{const t=window.location.pathname||"";return["/cart","/checkout"].some(n=>t.includes(n))}catch(t){return console.warn("Error checking path:",t),!1}},o=async t=>{if(!t.trim()||t.length<2){D([]),S(!1);return}ue(!0);try{const s=[["name","contains",t],"or",["summary","contains",t],"or",["description","contains",t]],d=await fetch("/api/items/paginate",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({take:8,skip:0,filter:u?[["store_id","=",u],"and",s]:s,sort:[{selector:"name",desc:!1}],requireTotalCount:!1,with:"category,brand"})});if(!d.ok)throw new Error("Error en la búsqueda");const l=await d.json();l.status===200&&Array.isArray(l.data)?(D(l.data),S(l.data.length>0)):(D([]),S(!1))}catch(s){console.error("Error fetching search suggestions:",s),D([]),S(!1)}finally{ue(!1)}},h=t=>{z(t),G(-1),K.current&&clearTimeout(K.current),K.current=setTimeout(()=>{o(t)},300)},j=()=>{S(!1),D([]),G(-1)},p=t=>{if(t)if(S(!1),g(!1),t.slug)window.location.href=`/product/${t.slug}`;else{let s=`/catalogo?search=${encodeURIComponent(t.name)}`;if(u){const n=N.find(l=>l.id===u),d=(n==null?void 0:n.slug)||u;s+=`&store=${encodeURIComponent(d)}`}window.location.href=s}};a.useEffect(()=>{function t(s){var n,d;U.current&&!U.current.contains(s.target)&&b(!1),T.current&&!T.current.contains(s.target)&&(c.trim()||g(!1)),H.current&&!H.current.contains(s.target)&&!((n=he.current)!=null&&n.contains(s.target))&&!((d=V.current)!=null&&d.contains(s.target))&&j()}return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[c]),a.useEffect(()=>{function t(s){W.current&&!W.current.contains(s.target)&&R(!1)}return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),a.useEffect(()=>{E&&x(-1)},[E]),a.useEffect(()=>{const t=Array.isArray(N)?N:[];M(t),x(-1)},[N]),a.useEffect(()=>{function t(s){if(E)if(s.key==="ArrowDown")s.preventDefault(),x(n=>Math.min(n+1,w.length));else if(s.key==="ArrowUp")s.preventDefault(),x(n=>Math.max(n-1,0));else if(s.key==="Enter"){if(I===0)v(""),R(!1);else if(I>0&&I<=w.length){const n=w[I-1];n&&(v(n.id),R(!1))}}else s.key==="Escape"&&R(!1)}return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[E,w,I]),a.useEffect(()=>{const t=()=>{window.scrollY>0?de(!0):de(!1)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]),a.useEffect(()=>{const t=s=>{s.key==="Escape"&&(L?j():k&&(g(!1),z("")))};return(k||L)&&document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[k,L]),a.useEffect(()=>()=>{K.current&&clearTimeout(K.current)},[]),a.useEffect(()=>{y>=0&&fe.current[y]&&H.current&&fe.current[y].scrollIntoView({block:"nearest",behavior:"smooth"})},[y]);const te={hidden:{opacity:0,y:-10,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:400,damping:25}},exit:{opacity:0,y:-10,scale:.95,transition:{duration:.15}}},$=[{icon:e.jsx(Pe,{size:16}),label:"Mi Perfil",href:"/profile"},{icon:e.jsx(Ne,{size:16}),label:"Mis Pedidos",href:"/customer/dashboard"},{icon:e.jsx(Ae,{size:16}),label:"Configuración",href:"/account"},{icon:e.jsx(we,{size:16}),label:"Cerrar Sesión",onClick:je}],Ce=t=>{if(t.preventDefault(),j(),c.trim()){const s=c.trim();let n=`/catalogo?search=${encodeURIComponent(s)}`;if(u){const d=N.find(J=>J.id===u),l=(d==null?void 0:d.slug)||u;n+=`&store=${encodeURIComponent(l)}`}window.location.href=n}return!1},Se=t=>{if(t.preventDefault(),j(),c.trim()){const s=c.trim();g(!1);let n=`/catalogo?search=${encodeURIComponent(s)}`;if(u){const d=N.find(J=>J.id===u),l=(d==null?void 0:d.slug)||u;n+=`&store=${encodeURIComponent(l)}`}window.location.href=n}return!1};function Ee(t){const s=H.current,n=me.current[t];if(!s||!n)return;const d=s.getBoundingClientRect(),l=n.getBoundingClientRect();l.top<d.top?s.scrollTop-=d.top-l.top:l.bottom>d.bottom&&(s.scrollTop+=l.bottom-d.bottom)}const pe=t=>{if(!(!L||C.length===0))switch(t.key){case"ArrowDown":t.preventDefault(),G(s=>{const n=s<C.length-1?s+1:s;return setTimeout(()=>Ee(n),0),n});break;case"ArrowUp":t.preventDefault(),G(s=>{const n=s>0?s-1:0;return setTimeout(()=>Ee(n),0),n});break;case"Enter":t.preventDefault(),y>=0&&y<C.length?p(C[y]):c.trim()&&Ce(t);break;case"Escape":S(!1);break}},be=({suggestions:t,isLoading:s,onSelect:n,selectedIndex:d})=>L?e.jsx(re.div,{ref:H,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-[60] max-h-80 overflow-y-auto mt-1",children:s?e.jsx("div",{className:"p-4 text-center customtext-neutral-dark",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}),"Buscando..."]})}):t.length>0?e.jsx("ul",{className:"py-2",children:t.map((l,J)=>e.jsx("li",{ref:Y=>me.current[J]=Y,children:e.jsxs("button",{"data-suggestion-button":!0,onMouseDown:Y=>{Y.preventDefault(),Y.stopPropagation(),setTimeout(()=>n(l),0)},className:`w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors duration-200 flex items-center gap-3 ${J===d?"bg-primary border-l-4 border-primary":""}`,type:"button",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-100 rounded-lg overflow-hidden",children:l.image?e.jsx("img",{src:`/api/items/media/${l.image}`,alt:l.name,className:"w-full h-full object-cover",onError:Y=>{Y.target.style.display="none"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center customtext-neutral-dark",children:e.jsx(O,{size:16})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium customtext-neutral-dark truncate",children:l.name}),l.category&&e.jsx("div",{className:"text-sm customtext-neutral-dark truncate",children:l.category.name}),l.final_price&&e.jsxs("div",{className:"text-sm font-semibold customtext-primary",children:["S/ ",parseFloat(l.final_price).toFixed(2)]})]})]})},l.id))}):e.jsx("div",{className:"p-4 text-center customtext-neutral-dark",children:"No se encontraron productos"})}):null;console.log(m);let ye=!1;if(m&&Array.isArray(m.roles)){const t=m.roles.map(s=>{var n;return(n=s.name)==null?void 0:n.toLowerCase()});ye=!t.includes("admin")&&!t.includes("root")}return e.jsxs("header",{className:`w-full top-0 left-0 z-50 transition-all duration-300 ${ge?"fixed bg-white shadow-lg":"relative bg-white"}`,children:[e.jsxs("div",{className:"px-primary  bg-white 2xl:px-0 2xl:max-w-7xl mx-auto py-4 font-font-secondary text-base font-semibold",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("a",{href:"/",className:"flex items-center gap-2 z-[51]",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:Le.APP_NAME,className:"h-14 object-contain object-center",onError:t=>{t.target.onerror=null,t.target.src="/assets/img/logo-bk.svg"}})}),(i==null?void 0:i.showLoginCart)&&e.jsxs("div",{className:"flex gap-8 lg:hidden",children:[e.jsxs("div",{className:`${k?"hidden":"flex"} items-center gap-4`,children:[m?e.jsxs("div",{ref:U,className:"relative",children:[e.jsx("button",{"aria-label":"user",className:"flex items-center gap-2 hover:customtext-primary transition-all duration-300 relative group",onClick:()=>b(!F),children:e.jsx("div",{className:"relative transform group-hover:scale-105 transition-transform duration-200",children:m.uuid?e.jsxs("div",{className:"relative",children:[e.jsx(Me,{uuid:m.uuid,name:m.name,lastname:m.lastname,className:"!w-6 !h-6 rounded-full object-cover border-2 border-primary ring-secondary transition-all duration-300"}),e.jsx("div",{className:"relative",style:{display:"none"},children:e.jsx(se,{className:"customtext-primary  border-primary rounded-full   ring-secondary transition-all duration-300",width:"1.5rem"})}),e.jsxs("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-primary border-2 border-white rounded-full animate-pulse",children:[e.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-ping opacity-75 absolute"}),e.jsx("div",{className:"w-full h-full bg-primary rounded-full"})]})]}):e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"customtext-primary border-2 border-primary rounded-full  ring-secondary  transition-all duration-300",width:"1.5rem"}),e.jsxs("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-primary border-2 border-white rounded-full animate-pulse",children:[e.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-ping opacity-75 absolute"}),e.jsx("div",{className:"w-full h-full bg-primary rounded-full"})]})]})})}),e.jsx(_,{children:F&&e.jsx(re.div,{initial:"hidden",animate:"visible",exit:"exit",variants:te,className:"absolute z-50 top-full -left-20 bg-white shadow-xl border-t rounded-xl w-48 mt-2",children:e.jsx("div",{className:"p-4",children:e.jsx("ul",{className:"space-y-3",children:ye?$.map((t,s)=>e.jsx("li",{children:t.onClick?e.jsxs("button",{"aria-label":"menu-items",onClick:n=>{n.preventDefault(),n.stopPropagation(),b(!1),setTimeout(()=>{t.onClick()},150)},className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[t.icon,e.jsx("span",{children:t.label})]}):e.jsxs("a",{href:t.href,onClick:n=>{n.stopPropagation(),b(!1)},className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[t.icon,e.jsx("span",{children:t.label})]})},s)):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs("a",{href:"/admin/home",onClick:t=>{t.stopPropagation(),b(!1)},className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[e.jsx(De,{size:16}),e.jsx("span",{children:"Dashboard"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),b(!1),setTimeout(()=>{je()},150)},className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[e.jsx(we,{size:16}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})})})})})]}):e.jsx("a",{href:"/iniciar-sesion",className:"flex items-center",children:e.jsx(se,{className:"customtext-primary",width:"1.5rem"})}),e.jsxs("button",{"aria-label":"",onClick:()=>X(!0),className:"flex items-center relative",children:[e.jsx(Ne,{className:"customtext-primary",width:"1.5rem"}),e.jsx("span",{className:"absolute -right-2 -top-2 inline-flex items-center justify-center w-4 h-4 bg-primary text-white rounded-full text-[8px]",children:ee})]})]}),e.jsx("button",{"aria-label":"Menú",onClick:()=>ce(!B),className:"flex md:hidden items-center justify-center bg-primary rounded-lg w-auto h-auto p-2 text-white fill-white transition-all duration-300 ",children:B?e.jsx(ke,{}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M10 5H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 12H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 19H14",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),e.jsx("div",{className:"hidden md:block relative w-full max-w-xl mx-auto",children:e.jsx("form",{onSubmit:Ce,role:"search",className:"relative w-full",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center bg-white py-2 pr-2 rounded-full shadow-sm border overflow-visible",style:{boxShadow:"0 6px 18px rgba(16,24,40,0.06)"},children:[e.jsxs("div",{className:"relative flex items-center pl-2 pr-1",ref:W,children:[e.jsxs("button",{type:"button",onClick:()=>R(t=>!t),"aria-haspopup":"listbox","aria-expanded":E,className:"h-10 flex items-center gap-2 pl-4 pr-3 bg-transparent border-none rounded-l-full font-normal customtext-neutral-dark focus:outline-none text-sm cursor-pointer",children:[e.jsx("span",{className:"truncate max-w-[140px] text-sm",children:u?((Re=N.find(t=>t.id==u))==null?void 0:Re.name)??u:"Todas las tiendas"}),e.jsx("svg",{className:`w-3 h-3 transition-transform ${E?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z",clipRule:"evenodd"})})]}),E&&e.jsx("div",{className:"absolute top-10 left-0 mt-2 w-[200px] bg-white rounded-md shadow-lg z-[70] py-1 max-h-64 overflow-hidden text-sm border",children:e.jsxs("ul",{role:"listbox",tabIndex:-1,className:"max-h-56 overflow-auto py-1",children:[e.jsxs("li",{className:`px-4 py-2 cursor-pointer flex items-center justify-between ${u===""?"bg-gray-100":"hover:bg-gray-100"}`,onMouseEnter:()=>x(0),onClick:()=>{v(""),R(!1)},children:[e.jsx("span",{children:"Todas las tiendas"}),u===""&&e.jsx(xe,{className:"text-primary w-4 h-4"})]}),Array.isArray(w)&&w.map((t,s)=>e.jsxs("li",{className:`px-4 py-2 cursor-pointer truncate flex items-center justify-between ${I===s+1?"bg-gray-100":"hover:bg-gray-100"}`,onMouseEnter:()=>x(s+1),onClick:()=>{v(t.id),R(!1)},children:[e.jsx("span",{className:"truncate pr-2",children:t.name}),u===t.id&&e.jsx(xe,{className:"text-primary w-4 h-4"})]},t.id||s))]})})]}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{ref:he,type:"search",name:"search",placeholder:"Estoy buscando...",value:c,onChange:t=>h(t.target.value),onKeyDown:pe,onFocus:()=>{c.trim().length>=2&&o(c)},className:"w-full h-10 pl-3 pr-12 bg-transparent text-sm placeholder:customtext-neutral-dark focus:outline-none",enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Estoy buscando..."}),e.jsx("button",{type:"submit",className:`absolute right-2 top-1/2 transform -translate-y-1/2 p-2 ${i!=null&&i.backgroundColor?i==null?void 0:i.backgroundColor:"bg-primary"} text-white rounded-lg hover:bg-primary hover:scale-105  transition-all duration-300`,"aria-label":"Buscar",children:e.jsx(O,{})})]})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute left-0 right-0 mt-2 z-50",children:e.jsx(_,{children:e.jsx(be,{suggestions:C,isLoading:q,onSelect:p})})})})]})})}),i!=null&&i.showLoginCart?e.jsxs("div",{className:"hidden md:flex items-center gap-4 relative text-sm",children:[e.jsxs("div",{ref:U,children:[m?e.jsxs("button",{"aria-label":"user",className:"customtext-neutral-dark flex items-center gap-2 hover:customtext-primary pr-6 transition-all duration-300 relative group",onClick:()=>b(!F),children:[e.jsx("div",{className:"relative transform group-hover:scale-105 transition-transform duration-200",children:m.uuid?e.jsxs("div",{className:"relative",children:[e.jsx(Me,{uuid:m.uuid,name:m.name,lastname:m.lastname,className:"w-8 h-8 rounded-full object-cover border-2 border-primary ring-secondary transition-all duration-300"}),e.jsxs("div",{className:"absolute -bottom-[-0.115rem] -right-0.5 w-3.5 h-3.5 bg-primary border-2 border-white rounded-full animate-pulse",children:[e.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-ping opacity-75 absolute"}),e.jsx("div",{className:"w-full h-full bg-primary rounded-full"})]})]}):e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"customtext-primary border-2 border-primary rounded-full  ring-secondary group-hover:ring-green-300 transition-all duration-300"}),e.jsxs("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-primary border-2 border-white rounded-full animate-pulse",children:[e.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-ping opacity-75 absolute"}),e.jsx("div",{className:"w-full h-full bg-primary rounded-full"})]})]})}),e.jsx("span",{className:"hidden md:inline",children:m.name})]}):e.jsxs("a",{href:"/iniciar-sesion",className:"flex items-center gap-2 text-sm hover:customtext-primary transition-colors duration-300",children:[e.jsx(se,{className:"customtext-primary"}),e.jsx("span",{className:"hidden md:inline",children:"Iniciar Sesión"})]}),e.jsx(_,{children:F&&e.jsx(re.div,{initial:"hidden",animate:"visible",exit:"exit",variants:te,className:"absolute z-50 top-full left-0 bg-white shadow-xl border-t rounded-xl w-48 mt-2",children:e.jsx("div",{className:"p-4",children:e.jsx("ul",{className:"space-y-4",children:ye?$.map((t,s)=>e.jsx("li",{children:t.onClick?e.jsxs("button",{"aria-label":"menu-items",onClick:n=>{n.preventDefault(),n.stopPropagation(),b(!1),setTimeout(()=>{t.onClick()},150)},className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[t.icon,e.jsx("span",{children:t.label})]}):e.jsxs("a",{href:t.href,onClick:n=>{n.stopPropagation(),b(!1)},className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[t.icon,e.jsx("span",{children:t.label})]})},s)):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs("a",{href:"/admin/home",onClick:t=>{t.stopPropagation(),b(!1)},className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[e.jsx(De,{size:16}),e.jsx("span",{children:"Dashboard"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),b(!1),setTimeout(()=>{je()},150)},className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[e.jsx(we,{size:16}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})})})})})]}),e.jsxs("button",{"aria-label":"cart",onClick:()=>X(!0),className:"flex items-center gap-2 text-sm relative hover:customtext-primary transition-colors duration-300",children:[e.jsx("div",{className:"customtext-primary",children:e.jsx(Ne,{})}),e.jsx("span",{className:"hidden md:inline",children:"Mi Carrito"}),e.jsx("span",{className:"absolute -right-6 -top-2 inline-flex items-center justify-center w-5 h-5 text-xs bg-primary text-white rounded-full",children:ee})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("a",{"aria-label":"primary-button",className:`${i.class?i.class:"bg-primary"} hidden lg:block px-6 py-2.5 text-white font-medium rounded-3xl hover:brightness-125 transition-colors duration-300`,target:"_blank",rel:"noopener noreferrer",href:oe&&Z?`https://api.whatsapp.com/send?phone=${encodeURIComponent(oe)}&text=${encodeURIComponent(Z)}`:"#",children:"Haz tu pedido"}),e.jsx("div",{className:"md:hidden relative w-full max-w-xl mx-auto",children:k?e.jsxs("div",{className:"relative w-full",children:[e.jsxs("form",{onSubmit:Se,role:"search",children:[e.jsx("input",{ref:V,type:"search",name:"search",placeholder:"Buscar productos",value:c,onChange:t=>h(t.target.value),onKeyDown:pe,onFocus:()=>{c.trim().length>=2&&o(c)},className:"w-full pr-14 py-4 pl-4 border rounded-full focus:ring-0 focus:outline-none",autoFocus:!0,enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Buscar productos",onBlur:()=>{setTimeout(()=>{!c.trim()&&!L&&g(!1)},200)}}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{z(""),j(),g(!1)},className:"p-2 bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300 transition-colors","aria-label":"Cerrar búsqueda",children:e.jsx(ke,{size:16})}),e.jsx("button",{type:"submit",className:`p-2 ${(i==null?void 0:i.backgroundColor)||"bg-primary"} text-white rounded-lg hover:bg-primary transition-colors`,"aria-label":"Buscar",children:e.jsx(O,{size:16})})]})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute left-0 right-0 mt-2 z-50",children:e.jsx(_,{children:e.jsx(be,{suggestions:C,isLoading:q,onSelect:p,selectedIndex:y})})})})]}):e.jsx("button",{"aria-label":"Buscar productos",onClick:()=>{g(!0),setTimeout(()=>{V.current&&V.current.focus()},100)},className:"flex items-center justify-end w-full px-0 py-3",children:e.jsx(O,{className:"customtext-primary",size:28})})})]})]}),(i==null?void 0:i.mobileSearch)&&!r()&&e.jsx("div",{className:"block md:hidden mt-6 space-y-4",children:e.jsxs("div",{className:"w-full relative",children:[e.jsxs("form",{onSubmit:Se,role:"search",className:"relative w-full",children:[e.jsx("input",{type:"search",name:"search",placeholder:"Buscar productos...",value:c,onChange:t=>h(t.target.value),onKeyDown:pe,onFocus:()=>{c.trim().length>=2&&o(c)},className:"w-full pr-14 py-3 font-normal pl-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent focus:outline-none bg-gray-50",enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Buscar productos"}),e.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:e.jsx(O,{size:18})})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute left-0 right-0 mt-2 z-50",children:e.jsx(_,{children:e.jsx(be,{suggestions:C,isLoading:q,onSelect:p,selectedIndex:y})})})})]})})]}),e.jsx(_,{children:B&&e.jsx(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"lg:hidden bg-transparent text-textWhite shadow-lg w-full min-h-screen absolute z-10 top-20",children:e.jsx(Be,{search:c,setSearch:z,pages:le,items:f,onClose:()=>ce(!B),searchSuggestions:C,isLoadingSuggestions:q,fetchSearchSuggestions:o,clearSuggestions:j,selectSuggestion:p,selectedSuggestionIndex:y,handleKeyDown:pe,stores:N,selectedStore:u,setSelectedStore:v})})}),e.jsx(Ie,{data:i,cart:ae,setCart:ne,modalOpen:A,setModalOpen:X}),e.jsx("div",{className:"flex justify-end w-full mx-auto z-[100] relative",children:e.jsx("div",{className:"block fixed bottom-6 sm:bottom-[2rem] lg:bottom-[4rem] z-20 cursor-pointer",children:e.jsx("a",{target:"_blank",id:"whatsapp-toggle",href:`https://api.whatsapp.com/send?phone=${oe}&text=${Z}`,children:e.jsx("img",{src:"/assets/img/whatsapp.svg",alt:"whatsapp",className:"mr-3 w-12 h-12 md:w-[60px] md:h-[60px] animate-bounce duration-300"})})})})]})};export{Ct as default};
