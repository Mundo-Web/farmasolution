var k=Object.defineProperty;var y=(s,t,n)=>t in s?k(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var x=(s,t,n)=>y(s,typeof t!="symbol"?t+"":t,n);import{j as o}from"./AboutSimple-Cf8x2fCZ.js";import{B as I}from"./Base-CewLMI0g.js";import{S as G}from"./SwitchFormGroup-B-vmnVqk.js";import{r}from"./index-BOnQTV8N.js";import{c as N}from"./ReactAppend-DTVVXReZ.js";import"./ProductCard-Lp5WfZrB.js";import{B as V}from"./BasicRest-BCYKfs4R.js";import{W as M}from"./WebDetailsRest-ByCTRHuH.js";import{B as O}from"./BasicEditing-4b1vbYNC.js";import{M as P}from"./Modal-BYL-UsqM.js";import{T as H}from"./Table-UhWMNAYe.js";import{D as L}from"./DxButton-DV0H-ZcL.js";import{I as m}from"./InputFormGroup-iZIO11ZN.js";import{S as Q}from"./SelectFormGroup-D63EMIiA.js";import{A as W}from"./ArrayDetails2Object-DR0Igcn7.js";import{C as z}from"./CreateReactScript-Bw0vifCy.js";import{R as F}from"./ReactAppend-D7S498fx.js";import{I as _}from"./ImageFormGroup-Brimgjsn.js";import{Q as J}from"./QuillFormGroup-ShbNmC_h.js";import"./index-yBjzXJbu.js";import"./Global-DWbVqTT_.js";import"./tippy-react.esm-Ce0cOK54.js";import"./index-C0Swrixi.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./index-fNjTmf9T.js";/* empty css              */import"./Logout-W0zm0J8x.js";import"./main-DKOTUah5.js";import"./___vite-browser-external_commonjs-proxy-DDYoOVPM.js";import"./MenuItemContainer-u5lOOJwd.js";import"./index.esm-0RgdCKj2.js";import"./index-Dq7h7Pqt.js";import"./CanAccess-DKJVq_mE.js";import"./index-DRg3WPTA.js";import"./em-Dm5QugzS.js";import"./HtmlContent-ghmllTyl.js";/* empty css               */import"./General-BmbBKdsB.js";import"./LaravelSession-Dz9cpV3l.js";class K extends V{constructor(){super(...arguments);x(this,"path","admin/aboutus");x(this,"hasFiles",!0)}}const h=new K,U=new M,E=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes(".local")||window.location.hostname.includes(".test"),X=[{value:"section-hero",text:"🦸‍♂️ Hero Principal - Sección principal con título e imagen"},{value:"section-mision",text:"🎯 Misión - Sección de misión de la empresa"},{value:"section-vision",text:"🔭 Visión - Sección de visión de la empresa"},{value:"section-valores",text:"⭐ Valores - Grid de valores empresariales"},{value:"section-equipo",text:"👥 Nuestro Equipo - Presentación del equipo"},{value:"section-historia",text:"📚 Nuestra Historia - Historia de la empresa"},{value:"section-cta",text:"📞 Call to Action - Sección de contacto final"}],Y=({details:s})=>{const t=r.useRef(),n=r.useRef(),p=r.useRef(),a=r.useRef(),f=r.useRef(),d=r.useRef(),v=r.useRef(),b=r.useRef(),u=r.useRef(),[C,g]=r.useState(!1),R=e=>{e!=null&&e.id?g(!0):g(!1),p.current.value=(e==null?void 0:e.id)??"",a.current.value=(e==null?void 0:e.correlative)??"",f.current.value=(e==null?void 0:e.name)??"",d.editor.root.innerHTML=(e==null?void 0:e.description)??"",v.current.value=(e==null?void 0:e.title)??"",b.current.value=(e==null?void 0:e.link)??"",u.current.value=null,u.image.src=`/storage/images/aboutus/${(e==null?void 0:e.image)??"undefined"}`,$(n.current).modal("show")},D=async e=>{e.preventDefault();const i={id:p.current.value||void 0,correlative:a.current.value,name:f.current.value,description:d.current.value,title:v.current.value,link:b.current.value},l=new FormData;for(const S in i)l.append(S,i[S]);const w=u.current.files[0];w&&l.append("image",w),await h.save(l)&&($(t.current).dxDataGrid("instance").refresh(),$(n.current).modal("hide"))},T=async({id:e,value:i})=>{await h.boolean({id:e,field:"visible",value:i})&&$(t.current).dxDataGrid("instance").refresh()},[c,q]=r.useState(W(s)),[A,j]=r.useState(!1),B=async e=>{U.save({page:"about",name:"video",description:e.target.value})&&(q(l=>({...l,"about.video":e.target.value})),j(!1))};return o.jsxs(o.Fragment,{children:[o.jsx(H,{gridRef:t,title:o.jsxs(o.Fragment,{children:[o.jsx(O,{correlative:"about",details:s}),A?o.jsx("input",{className:"form-control form-control-sm mb-1",defaultValue:c==null?void 0:c["about.video"],onBlur:B,autoFocus:!0}):o.jsx("smal",{className:"header-title mt-1",onClick:()=>j(!0),children:(c==null?void 0:c["about.video"])||"Sin video"})]}),rest:h,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(t.current).dxDataGrid("instance").refresh()}}),E&&e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo About",hint:"Agregar nuevo about",onClick:()=>R()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"correlative",caption:"Correlativo",width:150},{dataField:"name",caption:"Sección"},{dataField:"title",caption:"Título"},{dataField:"image",caption:"Imagen",cellTemplate:(e,{data:i})=>{F(e,o.jsx("img",{src:`/storage/images/aboutus/${i.image}`,style:{width:"80px",height:"80px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:l=>l.target.src="/api/cover/thumbnail/null"}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(e,{data:i})=>{$(e).empty(),F(e,o.jsx(G,{checked:i.visible==1,onChange:()=>T({id:i.id,value:i.visible==1?0:1})}))}},{caption:"Acciones",cellTemplate:(e,{data:i})=>{e.append(L({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>R(i)}))},allowFiltering:!1,allowExporting:!1}]}),o.jsx(P,{modalRef:n,title:C?"Editar about":"Agregar about",onSubmit:D,size:"md",children:o.jsxs("div",{className:"row",id:"aboutuses-container",children:[o.jsx("input",{ref:p,type:"hidden"}),E?o.jsxs(Q,{eRef:a,label:"Tipo de Bloque (Correlativo)",col:"col-12",required:!0,dropdownParent:"#aboutuses-container",helpText:"Selecciona el tipo de bloque que quieres crear",children:[o.jsx("option",{value:"",children:"Selecciona un bloque"}),X.map(e=>o.jsx("option",{value:e.value,children:e.text},e.value))]}):o.jsx(m,{eRef:a,label:"Correlativo",col:"col-12",required:!0}),o.jsx(m,{eRef:f,label:"Sección",col:"col-12",required:!0}),o.jsx(m,{eRef:v,label:"Título",col:"col-12"}),o.jsx(m,{eRef:b,label:"Link",col:"col-12"}),o.jsx(J,{eRef:d,label:"Descripción"}),o.jsx(_,{eRef:u,label:"Imagen",col:"col-12",rows:3})]})})]})};z((s,t)=>{N.createRoot(s).render(o.jsx(I,{...t,title:"Nosotros",children:o.jsx(Y,{...t})}))});
