import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r}from"./index-BOnQTV8N.js";import I from"./MenuSimple-BRfxEKmL.js";import{X as R}from"./x-fof_H3Vv.js";import{S as L}from"./search-BQ59Robe.js";import{C as B}from"./chevron-left-JcR9Fe4w.js";import{C as f}from"./chevron-right-Cug7tVUE.js";function X({search:i,setSearch:m,pages:g,items:h,onClose:c}){const[n,b]=r.useState("main"),[d,v]=r.useState(null),[K,y]=r.useState(null),[l,x]=r.useState([]),[p,j]=r.useState("right"),N=r.useRef(null),w=t=>{if(t.preventDefault(),i.trim()){const s=i.trim();window.location.href=`/catalogo?search=${encodeURIComponent(s)}`}return!1},C=t=>{if(t.key==="Enter"&&(t.preventDefault(),i.trim())){const s=i.trim();window.location.href=`/catalogo?search=${encodeURIComponent(s)}`}},o=(t,s="right",a=null)=>{j(s),a&&v(a),setTimeout(()=>{b(t)},50)},S=t=>{y(t.name),x([...l,{level:n,name:"Categorías"}]),o("subcategories","right",t.name)},k=()=>{if(l.length>0){const t=l[l.length-1];o(t.level,"left"),x(l.slice(0,-1))}else n==="subcategories"?o("categories","left"):n==="categories"&&o("main","left")},M=t=>{o("categories","right")},E=()=>"Menú principal",D=()=>{if(n==="main")return e.jsxs("div",{className:"animate-fade animate-duration-300",children:[e.jsxs("button",{className:"px-4 py-2 mb-3 w-full flex justify-between items-center hover:bg-gray-50 active:bg-primary transition-all  rounded-xl",onClick:()=>M(),children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"font-medium",children:"Categorías"})}),e.jsx(f,{className:"h-5 w-5 customtext-neutral-light"})]}),e.jsx("div",{className:"space-y-2",children:g.map((t,s)=>t.menuable&&e.jsx("a",{href:t.path,className:"p-4 py-2 flex justify-between items-center w-full hover:bg-gray-50 active:bg-primary transition-all  rounded-xl",children:e.jsx("span",{className:"font-medium",children:t.name})},s))})]});if(n==="categories"){const t=[...h].sort((s,a)=>s.name.localeCompare(a.name,"es",{sensitivity:"base"}));return e.jsx("div",{className:p==="right"?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:e.jsx("div",{className:"space-y-2",children:t.map(s=>e.jsxs("div",{className:"px-4 py-2  rounded-xl flex justify-between items-center cursor-pointer hover:bg-gray-50 active:bg-primary transition-all",onClick:()=>S(s),children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx(f,{className:"h-5 w-5 customtext-neutral-light"})]},s.id))})})}else if(n==="subcategories"&&d){const t=h.find(a=>a.name===d),s=t.subcategories?[...t.subcategories].sort((a,u)=>a.name.localeCompare(u.name,"es",{sensitivity:"base"})):[];return e.jsx("div",{className:p==="right"?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:e.jsx("div",{className:"space-y-2",children:s.map((a,u)=>e.jsxs("a",{href:`/catalogo?subcategory=${a.slug}`,className:"flex w-full px-4  py-2 rounded-xl justify-between items-center hover:bg-gray-50 active:bg-primary transition-all",children:[e.jsx("span",{className:"font-medium",children:a.name}),e.jsx(f,{className:"h-5 w-5 customtext-neutral-light"})]},u))})})}};return r.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),r.useEffect(()=>{const t=s=>{s.key==="Escape"&&(i.trim()?m(""):c())};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[i,c,m]),e.jsxs("div",{className:"fixed inset-0 z-[99999] flex flex-col touch-none overscroll-none",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:c}),e.jsx("div",{className:"relative w-full md:w-[400px] md:mx-auto flex flex-col h-[100dvh]  ",children:e.jsxs("div",{className:"mt-auto bg-white  shadow-xl flex flex-col max-h-[80vh] rounded-t-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-white flex justify-between items-center border-b border-gray-200 sticky top-0 z-[9999]",children:[e.jsx("h1",{className:"text-lg font-bold",children:E()}),e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",onClick:c,children:e.jsx(R,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"overflow-y-auto flex-1 p-4 overscroll-contain",children:[e.jsx("div",{className:"mb-5",children:e.jsxs("form",{onSubmit:w,role:"search",className:"relative w-full",children:[e.jsx("input",{ref:N,type:"search",name:"search",placeholder:"Buscar productos",value:i,onChange:t=>m(t.target.value),onKeyDown:C,className:"w-full pr-12 py-3 pl-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:outline-none",enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Buscar productos"}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:e.jsx(L,{className:"h-4 w-4"})})]})}),n!=="main"&&e.jsxs("button",{onClick:k,className:"flex items-center customtext-primary mb-4 font-medium",children:[e.jsx(B,{className:"h-5 w-5 mr-1"}),e.jsx("span",{children:n==="categories"?"Categorías":d})]}),e.jsx("div",{className:"pb-16",children:D()}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0  flex justify-center",children:e.jsx(I,{visible:!0})})]})]})})]})}export{X as M};
